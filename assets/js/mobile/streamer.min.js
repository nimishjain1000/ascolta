$(document).ready(function(){function e(e){renderPage("/search?page=thumbs&maxResults=20&relatedToVideoId="+e,{spin:!1,logHistory:!1,successCallback:function(e){$("#related").append(e)},failureCallback:function(e){}})}function t(e){for(var t=e.split(":"),i=0,a=1;t.length>0;)i+=a*parseInt(t.pop(),10),a*=60;return parseInt(i)}function i(i){video=$.parseJSON(i),playlist=[];for(var n=0;n<video.videos.length;n++){vid=video.videos[n];var o=vid.id||vid.videoId,r="#";"undefined"!=typeof vid.thumbnails.maxres?r=vid.thumbnails.medium.url:"undefined"!=typeof vid.thumbnails.medium?r=vid.thumbnails.medium.url:"undefined"!=typeof vid.thumbnails["default"]&&(r=vid.thumbnails["default"].url),playlist.push({file:"/ajax/stream?v="+o,id:o,thumb:r,trackName:vid.title,trackArtist:vid.channelTitle,trackDuration:vid.duration,trackSeconds:t(vid.duration)})}$("#jAudio--core-type").val();window.playlist=playlist,1==a?($(".jAudio").jAudio(),a=!1):(window.jAudioCore.renderPlaylist(),window.jAudioCore.changeTrack(0),window.jAudioCore.updateTotalTime(),window.jAudioCore.events()),e($("#currentTrack").attr("data-id"))}var a=!0;$("#main-content").on("click",".jAudio--control-download",function(e){e.preventDefault();var t=$("#currentTrack").attr("data-title")+" - "+$("#currentTrack").attr("data-artist"),i=$("#currentTrack").attr("data-id");window.open("http:////www.convertmp3.io/fetch/?video=https://www.youtube.com/watch?v="+i+"&title=[Ascolta.ml]%20"+t,"_self")}),$("#main-content").on("click",".recommended-load-more",function(e){e.preventDefault();var t=$(this).attr("href");$(".recommended-load-more-container").html('<i class="fa fa-fw fa-spin fa-circle-o-notch"></i>'),renderPage(t,{spin:!1,logHistory:!1,contentid:".recommended-load-more-container",successCallback:function(e){$(".recommended-load-more-container").remove(),$("#main-content").append(e)},failureCallback:function(){}})}),i($("#jAudio--core-data").attr("value")),$("#main-content").on("click",".video a",function(e){e.preventDefault();var t=$(this).find(".title").eq(0).text();renderPage($(this).attr("href"),{title:t})})});