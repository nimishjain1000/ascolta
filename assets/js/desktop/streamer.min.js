$(document).ready(function(){function t(t){renderPage("/search?page=thumbs&maxResults=20&relatedToVideoId="+t,{spin:!1,logHistory:!1,successCallback:function(t){$("#related").append(t)},failureCallback:function(t){}})}function e(t){for(var e=t.split(":"),i=0,a=1;e.length>0;)i+=a*parseInt(e.pop(),10),a*=60;return parseInt(i)}function i(i){video=$.parseJSON(i),playlist=[];for(var n=0;n<video.videos.length;n++){vid=video.videos[n];var r=vid.id||vid.videoId,o="#";"undefined"!=typeof vid.thumbnails.maxres?o=vid.thumbnails.medium.url:"undefined"!=typeof vid.thumbnails.medium?o=vid.thumbnails.medium.url:"undefined"!=typeof vid.thumbnails["default"]&&(o=vid.thumbnails["default"].url),playlist.push({file:"/ajax/stream?v="+r,id:r,thumb:o,trackName:vid.title,trackArtist:vid.channelTitle,trackDuration:vid.duration,trackSeconds:e(vid.duration)})}$("#jAudio--core-type").val();window.playlist=playlist,1==a?($(".jAudio").jAudio(),a=!1):(window.jAudioCore.renderPlaylist(),window.jAudioCore.changeTrack(0),window.jAudioCore.updateTotalTime(),window.jAudioCore.events()),$(".jAudio--control-play").click(),t($("#currentTrack").attr("data-id"))}var a=!0;$("#main-content").on("click",".jAudio--control-download",function(t){t.preventDefault();var e=$("#currentTrack").attr("data-title")+" - "+$("#currentTrack").attr("data-artist"),i=$("#currentTrack").attr("data-id");$.get("https://www.convertmp3.io/fetch/?format=JSON&video=https://www.youtube.com/watch?v="+i+"&title=[Ascolta.ml]%20"+e,function(t){window.open(t.link,"_self")}).fail(function(){$(".jAudio").parent().prepend('<div class="alert alert-danger"><p>Sorry, there was an error while downloading the file!</p></div>')})}),i($("#jAudio--core-data").attr("value")),$(document).on("click",".row a",function(t){t.preventDefault();var e=$(this).find(".title").eq(0).text();renderPage($(this).attr("href"),{title:e})}),$("#main-content").on("click",".recommended-load-more",function(t){t.preventDefault();var e=$(this).attr("href"),i=$(this).parent();$(this).html('<h5 class="brand"><i class="fa fa-fw fa-spin fa-circle-o-notch"></i> Loading</h5>'),renderPage(e,{contentid:"#related",spin:!1,logHistory:!1,successCallback:function(t){i.remove(),$("#related").append(t)},failureCallback:function(){}})})});